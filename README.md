# Установка n8n в Docker

Этот репозиторий содержит минимальную конфигурацию Docker Compose для развёртывания [n8n](https://n8n.io/) с включённой базовой аутентификацией и сохранением данных на диск.

## Быстрый старт

1. Скопируйте пример переменных окружения и задайте свои значения:
   ```bash
   cp .env.example .env
   # затем отредактируйте .env и задайте логин/пароль
   ```
2. Поднимите сервис:
   ```bash
   docker compose up -d
   ```
3. Откройте веб-интерфейс на `http://localhost:5678` (порт опубликован в Compose-файле) и авторизуйтесь, используя учётные данные из `.env`.

## Настройки безопасности

- В Compose-файле уже активирована базовая аутентификация (`N8N_BASIC_AUTH_ACTIVE=true`).
- Логин и пароль передаются через `.env` (`N8N_BASIC_AUTH_USER` и `N8N_BASIC_AUTH_PASSWORD`). Держите файл `.env` вне контроля версий.

## Хранение данных

По умолчанию используется SQLite. Данные n8n сохраняются в volume `n8n_data`, примонтированном к `/home/node/.n8n`. Для использования внешней базы данных добавьте соответствующие переменные окружения в `.env` и в секцию `environment`.

## Вебхуки и Telegram

Если планируете использовать триггеры, требующие публичного webhook (например, Telegram Trigger), обеспечьте доступность n8n по HTTPS:

- Настройте обратный прокси с TLS перед n8n и прокиньте публичный домен в переменной `WEBHOOK_TUNNEL_URL` (например, `https://example.com`).
- Либо используйте tunneling-сервис, который выдаёт HTTPS-URL, и укажите его в `WEBHOOK_TUNNEL_URL`.
- Для Telegram можно включить polling-режим в самом ноде-триггере, если нет публичного домена.

После указания `WEBHOOK_TUNNEL_URL` n8n будет использовать этот адрес для регистрации вебхуков.
